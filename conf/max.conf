# First server block
server {
	listen 8080;
	server_name localhost;
	root ./www/site1;
	index index.html index.htm;

	# Error handling
	error_page 404 /errors/404.html;
	error_page 500 /errors/500.html;

	# Max upload size
	client_max_body_size 5M;

	# Default route
	location / {
		autoindex off;
		allow_methods GET POST;
	}

	# Static assets (images, CSS, JS)
	location /assets/ {
		root ./www/assets;
		autoindex on;
	}

	# File upload endpoint
	location /upload/ {
		root ./www/uploads;
		allow_methods POST;
	}

	# CGI handler for Python and PHP
	location /cgi-bin/ {
		root ./www/cgi-bin;
		allow_methods GET POST;
		cgi_extension .py /usr/bin/python3;
		cgi_extension .php /usr/bin/php-cgi;
	}

	# Redirect example
	location /oldpage {
		return 301 /newpage;
	}
}

# Second server block
server {
	listen 8081;
	server_name example.com;
	root ./www/site2;
	index home.html;

	error_page 404 /404.html;
	client_max_body_size 10M;

	location / {
		autoindex on;
		allow_methods GET;
	}

	location /api/ {
		root ./www/api;
		allow_methods GET POST DELETE;
	}
}

